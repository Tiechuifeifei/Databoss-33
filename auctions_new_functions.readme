✨ 1. refreshAuctionStatus() — 自动更新拍卖状态

根据当前时间 vs startTime / endTime

自动把 auction 从：

scheduled → running

running → ended

在 cron job / MySQL event / 手动运行的 PHP 中被调用

这是 Auction 组必须做的 function（你今天已经写了）

Lecture 中对应内容：

Slide 13–21：Timers / Scheduled events

Slide 20：Manual run of auction-ending script

Slide 21：check auction ended & prevent bidding

✨ 2. 拍卖结束后触发逻辑（End-auction script）

这不是一个单独命名的 function，但 lecture 要求写：

一个 PHP 脚本，用于：

检查哪些 auction 已经结束

设置 auction.status = 'ended'

找出最高 bid → update winningBidId

后续可以触发通知（mail/notification）

Lecture 中对应：

Slide 14：run PHP script on schedule

Slide 20：“Create a PHP script that updates an auction when it ends and run it manually”

Slide 21：Prevent bids after end

这和你写的 refreshAuctionStatus() + updateAuctionWinningBid() 配合。

✨ 3. Cron job / MySQL event → 定时执行 Auction 检查

这个不是 function，但必须配合 Auction：

cron job（每 5 分钟检查一次 auction）

或 MySQL event scheduler（每天/每小时执行）

Auction 模块需要提供可调用的函数，让 cron 来执行。

Lecture 中对应：

Slide 14–19

| 功能                                                  | 属于哪个 module       | 讲义来源                       |
| --------------------------------------------------- | ----------------- | -------------------------- |
| **refreshAuctionStatus()**                          | Auction           | Timers, cron, MySQL events |
| **end-auction script**（结束后状态更新 + 选出 winning bid）    | Auction           | Slide 20–21                |
| **cron job / MySQL event 调用 Auction 的函数**           | Auction + System  | Slide 14–19                |
| **updateAuctionWinningBid()**（被 Bid 调用）             | Auction           | 与 bid 交互                   |
| **send email / notification after auction end（可选）** | User/Notification | Slide 2–12                 |
